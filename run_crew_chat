#!/bin/bash

retries=0

until [ $retries -ge 3 ]
do
    python your_module.py
    if [ $? -eq 0 ]; then
        break
    fi
    error=$(python your_module.py 2>&1 >/dev/null)
    if [[ $error == *"TimeoutException"* ]]; then
        ((retries++))
        echo "TimeoutException caught, retrying... ($retries out of 3)"
    else
        echo "Error: $error"
        exit 1
    fi
done

if [ $retries -eq 3 ]; then
    echo "Module failed after 3 retries, quitting."
    exit 1
fi
